# 12.1实现相机在不同帧率下的稳定运动

之前我们创建的相机类有些问题，相机的运动是在OnUpdate中进行判定的，也就是说相机的运动频率与OnUpdate同步；

那么问题来了，OnUpdate运行的频率是什么？

答案是我们程序实际运行的帧率，比如我设置了垂直同步，那么帧率大概就是60f/s，如果某个人的设备很快，他还同时关闭了垂直同步，那么他的帧率很可能就会达到100甚至更高，这时的现象就是相机的移动速度变快了，因为我们现在设置的相机平移速度是恒定的0.1f。

本次就跟随cherno解决了这个问题。



## **解决**

首先思考，如果帧率变高，如何让相机移动变慢呢？

应该把相机的移动频率变慢吗？不，这样等价于帧率下降，帧率高能让渲染画面更加流畅。

应该把相机的移动速度对应变慢。也就是说帧率越高，相机速度应该越慢，帧率下降时，相机速度应该增大，这样无论如何，在画面中相机都是稳定移动的。



## **实现**

我们通过计算上一帧（上一次app循环）的时间: 	Lt （second/frame）

给定新的合适的一个相机速度：								 Cv （float/second）

二者相乘作为本帧相机的移动距离，					Cmove（float/frame）

这样，当帧率高时，Lt变短，Cv不变，Cmove的结果就会更小，

以秒second 为度量的话，Cmove是每帧的移动距离，**Cmove * 1/Lt（帧率）**就是每秒移动速度（float/second），它是不变的，也就是在真实时间看来是稳定的速度值。